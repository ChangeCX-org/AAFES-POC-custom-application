{"version":3,"file":"5737.5737.d1325b94aa58ffa878ed.js","mappings":"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","sources":["webpack://aafes-poc-custom-application/./src/constants.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/conversions.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/constants.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/validate.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/messages.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/channel-details-form.tsx","webpack://aafes-poc-custom-application/./src/components/channel-details/transform-errors.ts","webpack://aafes-poc-custom-application/./src/components/channel-details/channel-details.tsx"],"sourcesContent":["// Make sure to import the helper functions from the `ssr` entry point.\r\nimport { entryPointUriPathToPermissionKeys } from '@commercetools-frontend/application-shell/ssr';\r\n\r\nexport const entryPointUriPath = 'aafes';\r\n\r\nexport const PERMISSIONS = entryPointUriPathToPermissionKeys(entryPointUriPath);\r\n","import LocalizedTextInput from '@commercetools-uikit/localized-text-input';\r\nimport { transformLocalizedFieldToLocalizedString } from '@commercetools-frontend/l10n';\r\nimport type { TFetchChannelDetailsQuery } from '../../types/generated/ctp';\r\nimport type { TFormValues } from '../../types';\r\n\r\nexport const docToFormValues = (\r\n  channel: TFetchChannelDetailsQuery['channel'],\r\n  languages: string[]\r\n): TFormValues => ({\r\n  key: channel?.key ?? '',\r\n  roles: channel?.roles ?? [],\r\n  name: LocalizedTextInput.createLocalizedString(\r\n    languages,\r\n    transformLocalizedFieldToLocalizedString(channel?.nameAllLocales ?? []) ??\r\n      {}\r\n  ),\r\n});\r\n\r\nexport const formValuesToDoc = (formValues: TFormValues) => ({\r\n  name: LocalizedTextInput.omitEmptyTranslations(formValues.name),\r\n  key: formValues.key,\r\n  roles: formValues.roles,\r\n});\r\n","// https://docs.commercetools.com/api/projects/channels#channelroleenum\r\nexport const CHANNEL_ROLES = {\r\n  inventorySupply: 'InventorySupply',\r\n  productDistribution: 'ProductDistribution',\r\n  orderExport: 'OrderExport',\r\n  orderImport: 'OrderImport',\r\n  primary: 'Primary',\r\n};\r\n","import TextInput from '@commercetools-uikit/text-input';\r\nimport omitEmpty from 'omit-empty-es';\r\nimport type { FormikErrors } from 'formik';\r\nimport type { TFormValues } from '../../types';\r\n\r\ntype TErrors = {\r\n  key: { missing?: boolean };\r\n  roles: { missing?: boolean };\r\n};\r\n\r\nconst validate = (formikValues: TFormValues): FormikErrors<TFormValues> => {\r\n  const errors: TErrors = {\r\n    key: {},\r\n    roles: {},\r\n  };\r\n\r\n  if (TextInput.isEmpty(formikValues.key)) {\r\n    errors.key.missing = true;\r\n  }\r\n  if (Array.isArray(formikValues.roles) && formikValues.roles.length === 0) {\r\n    errors.roles.missing = true;\r\n  }\r\n  return omitEmpty(errors);\r\n};\r\n\r\nexport default validate;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  backToChannelsList: {\r\n    id: 'ChannelDetails.backToChannelsList',\r\n    defaultMessage: 'Back to channels list',\r\n  },\r\n  duplicateKey: {\r\n    id: 'ChannelDetails.duplicateKey',\r\n    defaultMessage: 'A channel with this key already exists.',\r\n  },\r\n  channelUpdated: {\r\n    id: 'ChannelDetails.channelUpdated',\r\n    defaultMessage: 'Channel {channelName} updated',\r\n  },\r\n  channelKeyLabel: {\r\n    id: 'ChannelDetails.channelKeyLabel',\r\n    defaultMessage: 'Channel key',\r\n  },\r\n  channelNameLabel: {\r\n    id: 'ChannelDetails.channelNameLabel',\r\n    defaultMessage: 'Channel name',\r\n  },\r\n  channelRolesLabel: {\r\n    id: 'ChannelDetails.channelRolesLabel',\r\n    defaultMessage: 'Channel roles',\r\n  },\r\n  hint: {\r\n    id: 'ChannelDetails.hint',\r\n    defaultMessage:\r\n      'This page demonstrates for instance how to use forms, notifications and how to update data using GraphQL, etc.',\r\n  },\r\n  modalTitle: {\r\n    id: 'ChannelDetails.modalTitle',\r\n    defaultMessage: 'Edit channel',\r\n  },\r\n  channelDetailsErrorMessage: {\r\n    id: 'ChannelDetails.errorMessage',\r\n    defaultMessage:\r\n      'We were unable to fetch the channel details. Please check your connection, the provided channel ID and try again.',\r\n  },\r\n});\r\n","import type { ReactElement } from 'react';\r\nimport { useFormik, type FormikHelpers } from 'formik';\r\nimport { useIntl } from 'react-intl';\r\nimport LocalizedTextField from '@commercetools-uikit/localized-text-field';\r\nimport TextField from '@commercetools-uikit/text-field';\r\nimport Spacings from '@commercetools-uikit/spacings';\r\nimport SelectField from '@commercetools-uikit/select-field';\r\nimport type { TFormValues } from '../../types';\r\nimport { CHANNEL_ROLES } from './constants';\r\nimport validate from './validate';\r\nimport messages from './messages';\r\n\r\ntype TChannelRole = keyof typeof CHANNEL_ROLES;\r\ntype Formik = ReturnType<typeof useFormik>;\r\ntype FormProps = {\r\n  formElements: ReactElement;\r\n  values: Formik['values'];\r\n  isDirty: Formik['dirty'];\r\n  isSubmitting: Formik['isSubmitting'];\r\n  submitForm: Formik['handleSubmit'];\r\n  handleReset: Formik['handleReset'];\r\n};\r\ntype TChannelDetailsFormProps = {\r\n  onSubmit: (\r\n    values: TFormValues,\r\n    formikHelpers: FormikHelpers<TFormValues>\r\n  ) => void | Promise<unknown>;\r\n  initialValues: TFormValues;\r\n  isReadOnly: boolean;\r\n  dataLocale: string;\r\n  children: (formProps: FormProps) => JSX.Element;\r\n};\r\n\r\nconst getRoleOptions = Object.keys(CHANNEL_ROLES).map((key) => ({\r\n  label: CHANNEL_ROLES[key as TChannelRole],\r\n  value: CHANNEL_ROLES[key as TChannelRole],\r\n}));\r\n\r\nconst ChannelDetailsForm = (props: TChannelDetailsFormProps) => {\r\n  const intl = useIntl();\r\n  const formik = useFormik<TFormValues>({\r\n    initialValues: props.initialValues,\r\n    onSubmit: props.onSubmit,\r\n    validate,\r\n    enableReinitialize: true,\r\n  });\r\n\r\n  const formElements = (\r\n    <Spacings.Stack scale=\"l\">\r\n      <TextField\r\n        name=\"key\"\r\n        title={intl.formatMessage(messages.channelKeyLabel)}\r\n        value={formik.values.key}\r\n        errors={TextField.toFieldErrors<TFormValues>(formik.errors).key}\r\n        touched={formik.touched.key}\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n        isReadOnly={props.isReadOnly}\r\n        renderError={(errorKey) => {\r\n          if (errorKey === 'duplicate') {\r\n            return intl.formatMessage(messages.duplicateKey);\r\n          }\r\n          return null;\r\n        }}\r\n        isRequired\r\n        horizontalConstraint={13}\r\n      />\r\n      <LocalizedTextField\r\n        name=\"name\"\r\n        title={intl.formatMessage(messages.channelNameLabel)}\r\n        value={formik.values.name}\r\n        errors={TextField.toFieldErrors<TFormValues>(formik.errors).name}\r\n        touched={Boolean(formik.touched.name)}\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n        selectedLanguage={props.dataLocale}\r\n        isReadOnly={props.isReadOnly}\r\n        horizontalConstraint={13}\r\n      />\r\n      <SelectField\r\n        name=\"roles\"\r\n        title={intl.formatMessage(messages.channelRolesLabel)}\r\n        value={formik.values.roles}\r\n        errors={SelectField.toFieldErrors<TFormValues>(formik.errors).roles}\r\n        touched={formik.touched.roles}\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n        isMulti\r\n        options={getRoleOptions}\r\n        isReadOnly={props.isReadOnly}\r\n        isRequired\r\n        horizontalConstraint={13}\r\n      />\r\n    </Spacings.Stack>\r\n  );\r\n\r\n  return props.children({\r\n    formElements,\r\n    values: formik.values,\r\n    isDirty: formik.dirty,\r\n    isSubmitting: formik.isSubmitting,\r\n    submitForm: formik.handleSubmit,\r\n    handleReset: formik.handleReset,\r\n  });\r\n};\r\nChannelDetailsForm.displayName = 'ChannelDetailsForm';\r\n\r\nexport default ChannelDetailsForm;\r\n","import omitEmpty from 'omit-empty-es';\r\n\r\nconst DUPLICATE_FIELD_ERROR_CODE = 'DuplicateField';\r\n\r\ntype TransformedErrors = {\r\n  unmappedErrors: unknown[];\r\n  formErrors: Record<string, { duplicate: boolean }>;\r\n};\r\n\r\nexport const transformErrors = (graphQlErrors: unknown): TransformedErrors => {\r\n  const errorsToMap = Array.isArray(graphQlErrors)\r\n    ? graphQlErrors\r\n    : [graphQlErrors];\r\n\r\n  const { formErrors, unmappedErrors } = errorsToMap.reduce<TransformedErrors>(\r\n    (transformedErrors, graphQlError) => {\r\n      const errorCode = graphQlError?.extensions?.code ?? graphQlError.code;\r\n      const fieldName = graphQlError?.extensions?.field ?? graphQlError.field;\r\n\r\n      if (errorCode === DUPLICATE_FIELD_ERROR_CODE) {\r\n        transformedErrors.formErrors[fieldName] = { duplicate: true };\r\n      } else {\r\n        transformedErrors.unmappedErrors.push(graphQlError);\r\n      }\r\n      return transformedErrors;\r\n    },\r\n    {\r\n      formErrors: {}, // will be mappped to form field error messages\r\n      unmappedErrors: [], // will result in dispatching `showApiErrorNotification`\r\n    }\r\n  );\r\n\r\n  return {\r\n    formErrors: omitEmpty(formErrors),\r\n    unmappedErrors,\r\n  };\r\n};\r\n","import { useIntl } from 'react-intl';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  PageNotFound,\r\n  FormModalPage,\r\n} from '@commercetools-frontend/application-components';\r\nimport { ContentNotification } from '@commercetools-uikit/notifications';\r\nimport Text from '@commercetools-uikit/text';\r\nimport Spacings from '@commercetools-uikit/spacings';\r\nimport LoadingSpinner from '@commercetools-uikit/loading-spinner';\r\nimport { useCallback } from 'react';\r\nimport { useApplicationContext } from '@commercetools-frontend/application-shell-connectors';\r\nimport { formatLocalizedString } from '@commercetools-frontend/l10n';\r\nimport { DOMAINS, NO_VALUE_FALLBACK } from '@commercetools-frontend/constants';\r\nimport { useIsAuthorized } from '@commercetools-frontend/permissions';\r\nimport {\r\n  useShowNotification,\r\n  useShowApiErrorNotification,\r\n  type TApiErrorNotificationOptions,\r\n} from '@commercetools-frontend/actions-global';\r\nimport { PERMISSIONS } from '../../constants';\r\nimport {\r\n  useChannelDetailsUpdater,\r\n  useChannelDetailsFetcher,\r\n} from '../../hooks/use-channels-connector';\r\nimport { docToFormValues, formValuesToDoc } from './conversions';\r\nimport ChannelsDetailsForm from './channel-details-form';\r\nimport { transformErrors } from './transform-errors';\r\nimport messages from './messages';\r\nimport { ApplicationPageTitle } from '@commercetools-frontend/application-shell';\r\n\r\ntype TChannelDetailsProps = {\r\n  onClose: () => void;\r\n};\r\n\r\nconst ChannelDetails = (props: TChannelDetailsProps) => {\r\n  const intl = useIntl();\r\n  const params = useParams<{ id: string }>();\r\n  const { loading, error, channel } = useChannelDetailsFetcher(params.id);\r\n  const { dataLocale, projectLanguages } = useApplicationContext((context) => ({\r\n    dataLocale: context.dataLocale ?? '',\r\n    projectLanguages: context.project?.languages ?? [],\r\n  }));\r\n  const canManage = useIsAuthorized({\r\n    demandedPermissions: [PERMISSIONS.Manage],\r\n  });\r\n  const showNotification = useShowNotification();\r\n  const showApiErrorNotification = useShowApiErrorNotification();\r\n  const channelDetailsUpdater = useChannelDetailsUpdater();\r\n  const handleSubmit = useCallback(\r\n    async (formikValues, formikHelpers) => {\r\n      const data = formValuesToDoc(formikValues);\r\n      try {\r\n        await channelDetailsUpdater.execute({\r\n          originalDraft: channel!,\r\n          nextDraft: data,\r\n        });\r\n        showNotification({\r\n          kind: 'success',\r\n          domain: DOMAINS.SIDE,\r\n          text: intl.formatMessage(messages.channelUpdated, {\r\n            channelName: formatLocalizedString(formikValues, {\r\n              key: 'name',\r\n              locale: dataLocale,\r\n              fallbackOrder: projectLanguages,\r\n            }),\r\n          }),\r\n        });\r\n      } catch (graphQLErrors) {\r\n        const transformedErrors = transformErrors(graphQLErrors);\r\n        if (transformedErrors.unmappedErrors.length > 0) {\r\n          showApiErrorNotification({\r\n            errors:\r\n              transformedErrors.unmappedErrors as TApiErrorNotificationOptions['errors'],\r\n          });\r\n        }\r\n\r\n        formikHelpers.setErrors(transformedErrors.formErrors);\r\n      }\r\n    },\r\n    [\r\n      channel,\r\n      channelDetailsUpdater,\r\n      dataLocale,\r\n      intl,\r\n      projectLanguages,\r\n      showApiErrorNotification,\r\n      showNotification,\r\n    ]\r\n  );\r\n  return (\r\n    <ChannelsDetailsForm\r\n      initialValues={docToFormValues(channel, projectLanguages)}\r\n      onSubmit={handleSubmit}\r\n      isReadOnly={!canManage}\r\n      dataLocale={dataLocale}\r\n    >\r\n      {(formProps) => {\r\n        const channelName = formatLocalizedString(\r\n          {\r\n            name: formProps.values?.name,\r\n          },\r\n          {\r\n            key: 'name',\r\n            locale: dataLocale,\r\n            fallbackOrder: projectLanguages,\r\n            fallback: NO_VALUE_FALLBACK,\r\n          }\r\n        );\r\n        return (\r\n          <FormModalPage\r\n            title={channelName}\r\n            isOpen\r\n            onClose={props.onClose}\r\n            isPrimaryButtonDisabled={\r\n              formProps.isSubmitting || !formProps.isDirty || !canManage\r\n            }\r\n            isSecondaryButtonDisabled={!formProps.isDirty}\r\n            onSecondaryButtonClick={formProps.handleReset}\r\n            onPrimaryButtonClick={() => formProps.submitForm()}\r\n            labelPrimaryButton={FormModalPage.Intl.save}\r\n            labelSecondaryButton={FormModalPage.Intl.revert}\r\n          >\r\n            {loading && (\r\n              <Spacings.Stack alignItems=\"center\">\r\n                <LoadingSpinner />\r\n              </Spacings.Stack>\r\n            )}\r\n            {error && (\r\n              <ContentNotification type=\"error\">\r\n                <Text.Body>\r\n                  {intl.formatMessage(messages.channelDetailsErrorMessage)}\r\n                </Text.Body>\r\n              </ContentNotification>\r\n            )}\r\n            {channel && formProps.formElements}\r\n            {channel && (\r\n              <ApplicationPageTitle additionalParts={[channelName]} />\r\n            )}\r\n            {channel === null && <PageNotFound />}\r\n          </FormModalPage>\r\n        );\r\n      }}\r\n    </ChannelsDetailsForm>\r\n  );\r\n};\r\nChannelDetails.displayName = 'ChannelDetails';\r\n\r\nexport default ChannelDetails;\r\n"],"names":["PERMISSIONS","entryPointUriPathToPermissionKeys","docToFormValues","channel","languages","key","roles","name","LocalizedTextInput","transformLocalizedFieldToLocalizedString","nameAllLocales","formValuesToDoc","formValues","CHANNEL_ROLES","inventorySupply","productDistribution","orderExport","orderImport","primary","validate","formikValues","errors","TextInput","missing","length","omitEmpty","defineMessages","backToChannelsList","id","defaultMessage","duplicateKey","channelUpdated","channelKeyLabel","channelNameLabel","channelRolesLabel","hint","modalTitle","channelDetailsErrorMessage","getRoleOptions","label","value","ChannelDetailsForm","props","intl","useIntl","formik","useFormik","initialValues","onSubmit","enableReinitialize","formElements","scale","title","formatMessage","messages","TextField","touched","onChange","handleChange","onBlur","handleBlur","isReadOnly","renderError","errorKey","isRequired","horizontalConstraint","Boolean","selectedLanguage","dataLocale","SelectField","isMulti","options","children","values","isDirty","dirty","isSubmitting","submitForm","handleSubmit","handleReset","displayName","transformErrors","graphQlErrors","errorsToMap","transformedErrors","graphQlError","errorCode","extensions","code","fieldName","field","formErrors","duplicate","unmappedErrors","push","ChannelDetails","params","useParams","useChannelDetailsFetcher","loading","error","useApplicationContext","context","projectLanguages","project","canManage","useIsAuthorized","demandedPermissions","Manage","showNotification","useShowNotification","showApiErrorNotification","useShowApiErrorNotification","channelDetailsUpdater","useChannelDetailsUpdater","useCallback","formikHelpers","data","execute","originalDraft","nextDraft","kind","domain","DOMAINS","text","channelName","formatLocalizedString","locale","fallbackOrder","setErrors","formProps","fallback","NO_VALUE_FALLBACK","isOpen","onClose","isPrimaryButtonDisabled","isSecondaryButtonDisabled","onSecondaryButtonClick","onPrimaryButtonClick","labelPrimaryButton","FormModalPage","labelSecondaryButton","alignItems","type","additionalParts"],"sourceRoot":""}