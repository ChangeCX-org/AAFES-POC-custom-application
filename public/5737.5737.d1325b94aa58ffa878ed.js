"use strict";(self.webpackChunkaafes_poc_custom_application=self.webpackChunkaafes_poc_custom_application||[]).push([[5737],{"./src/components/channel-details/index.ts":(e,o,n)=>{n.r(o),n.d(o,{default:()=>$});var t=n("./node_modules/@babel/runtime-corejs3/helpers/esm/asyncToGenerator.js"),s=n("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/values.js"),l=n.n(s),a=n("./node_modules/@babel/runtime-corejs3/regenerator/index.js"),r=n.n(a),i=n("./node_modules/react-intl/lib/src/components/useIntl.js"),d=n("./node_modules/react-router/esm/react-router.js"),c=n("./node_modules/@commercetools-frontend/application-components/dist/commercetools-frontend-application-components.esm.js"),m=n("./node_modules/@commercetools-uikit/notifications/dist/commercetools-uikit-notifications.esm.js"),u=n("./node_modules/@commercetools-uikit/text/dist/commercetools-uikit-text.esm.js"),h=n("./node_modules/@commercetools-uikit/spacings/dist/commercetools-uikit-spacings.esm.js"),p=n("./node_modules/@commercetools-uikit/loading-spinner/dist/commercetools-uikit-loading-spinner.esm.js"),f=n("./node_modules/react/index.js"),b=n("./node_modules/@commercetools-frontend/application-shell-connectors/dist/commercetools-frontend-application-shell-connectors.esm.js"),k=n("./node_modules/@commercetools-frontend/l10n/dist/commercetools-frontend-l10n.esm.js"),y=n("./node_modules/@commercetools-frontend/constants/dist/commercetools-frontend-constants.esm.js"),g=n("./node_modules/@commercetools-frontend/permissions/dist/commercetools-frontend-permissions.esm.js"),v=n("./node_modules/@commercetools-frontend/actions-global/dist/commercetools-frontend-actions-global.esm.js"),j=(0,n("./node_modules/@commercetools-frontend/application-shell/ssr/dist/commercetools-frontend-application-shell-ssr.esm.js").X7)("aafes"),_=n("./src/hooks/use-channels-connector/index.ts"),C=n("./node_modules/@commercetools-uikit/localized-text-input/dist/commercetools-uikit-localized-text-input.esm.js"),E=function docToFormValues(e,o){var n,t,s,l;return{key:null!==(n=null===e||void 0===e?void 0:e.key)&&void 0!==n?n:"",roles:null!==(t=null===e||void 0===e?void 0:e.roles)&&void 0!==t?t:[],name:C.Z.createLocalizedString(o,null!==(s=(0,k.sM)(null!==(l=null===e||void 0===e?void 0:e.nameAllLocales)&&void 0!==l?l:[]))&&void 0!==s?s:{})}},x=function formValuesToDoc(e){return{name:C.Z.omitEmptyTranslations(e.name),key:e.key,roles:e.roles}},D=n("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js"),Z=n.n(D),L=n("./node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js"),M=n.n(L),B=n("./node_modules/formik/dist/formik.esm.js"),R=n("./node_modules/@commercetools-uikit/localized-text-field/dist/commercetools-uikit-localized-text-field.esm.js"),S=n("./node_modules/@commercetools-uikit/text-field/dist/commercetools-uikit-text-field.esm.js"),O=n("./node_modules/@commercetools-uikit/select-field/dist/commercetools-uikit-select-field.esm.js"),w={inventorySupply:"InventorySupply",productDistribution:"ProductDistribution",orderExport:"OrderExport",orderImport:"OrderImport",primary:"Primary"},F=n("./node_modules/@babel/runtime-corejs3/core-js-stable/array/is-array.js"),I=n.n(F),P=n("./node_modules/@commercetools-uikit/text-input/dist/commercetools-uikit-text-input.esm.js"),T=n("./node_modules/omit-empty-es/dist/omit-empty-es.esm.js");const z=function validate(e){var o={key:{},roles:{}};return P.Z.isEmpty(e.key)&&(o.key.missing=!0),I()(e.roles)&&0===e.roles.length&&(o.roles.missing=!0),(0,T.Z)(o)};const N=(0,n("./node_modules/react-intl/lib/index.js").vU)({backToChannelsList:{id:"ChannelDetails.backToChannelsList",defaultMessage:"Back to channels list"},duplicateKey:{id:"ChannelDetails.duplicateKey",defaultMessage:"A channel with this key already exists."},channelUpdated:{id:"ChannelDetails.channelUpdated",defaultMessage:"Channel {channelName} updated"},channelKeyLabel:{id:"ChannelDetails.channelKeyLabel",defaultMessage:"Channel key"},channelNameLabel:{id:"ChannelDetails.channelNameLabel",defaultMessage:"Channel name"},channelRolesLabel:{id:"ChannelDetails.channelRolesLabel",defaultMessage:"Channel roles"},hint:{id:"ChannelDetails.hint",defaultMessage:"This page demonstrates for instance how to use forms, notifications and how to update data using GraphQL, etc."},modalTitle:{id:"ChannelDetails.modalTitle",defaultMessage:"Edit channel"},channelDetailsErrorMessage:{id:"ChannelDetails.errorMessage",defaultMessage:"We were unable to fetch the channel details. Please check your connection, the provided channel ID and try again."}});var K,U=n("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),V=Z()(K=M()(w)).call(K,(function(e){return{label:w[e],value:w[e]}})),W=function ChannelDetailsForm(e){var o=(0,i.Z)(),n=(0,B.TA)({initialValues:e.initialValues,onSubmit:e.onSubmit,validate:z,enableReinitialize:!0}),t=(0,U.BX)(h.Z.Stack,{scale:"l",children:[(0,U.tZ)(S.Z,{name:"key",title:o.formatMessage(N.channelKeyLabel),value:l()(n).key,errors:S.Z.toFieldErrors(n.errors).key,touched:n.touched.key,onChange:n.handleChange,onBlur:n.handleBlur,isReadOnly:e.isReadOnly,renderError:function renderError(e){return"duplicate"===e?o.formatMessage(N.duplicateKey):null},isRequired:!0,horizontalConstraint:13}),(0,U.tZ)(R.Z,{name:"name",title:o.formatMessage(N.channelNameLabel),value:l()(n).name,errors:S.Z.toFieldErrors(n.errors).name,touched:Boolean(n.touched.name),onChange:n.handleChange,onBlur:n.handleBlur,selectedLanguage:e.dataLocale,isReadOnly:e.isReadOnly,horizontalConstraint:13}),(0,U.tZ)(O.Z,{name:"roles",title:o.formatMessage(N.channelRolesLabel),value:l()(n).roles,errors:O.Z.toFieldErrors(n.errors).roles,touched:n.touched.roles,onChange:n.handleChange,onBlur:n.handleBlur,isMulti:!0,options:V,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:13})]});return e.children({formElements:t,values:l()(n),isDirty:n.dirty,isSubmitting:n.isSubmitting,submitForm:n.handleSubmit,handleReset:n.handleReset})};W.displayName="ChannelDetailsForm";const A=W;var X=n("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/reduce.js"),q=n.n(X),G=function transformErrors(e){var o=I()(e)?e:[e],n=q()(o).call(o,(function(e,o){var n,t,s,l,a=null!==(n=null===o||void 0===o||null===(t=o.extensions)||void 0===t?void 0:t.code)&&void 0!==n?n:o.code,r=null!==(s=null===o||void 0===o||null===(l=o.extensions)||void 0===l?void 0:l.field)&&void 0!==s?s:o.field;return"DuplicateField"===a?e.formErrors[r]={duplicate:!0}:e.unmappedErrors.push(o),e}),{formErrors:{},unmappedErrors:[]}),t=n.formErrors,s=n.unmappedErrors;return{formErrors:(0,T.Z)(t),unmappedErrors:s}},H=n("./node_modules/@commercetools-frontend/application-shell/dist/commercetools-frontend-application-shell.esm.js"),Q=function ChannelDetails(e){var o=(0,i.Z)(),n=(0,d.UO)(),s=(0,_.wP)(n.id),a=s.loading,C=s.error,D=s.channel,Z=(0,b.UV)((function(e){var o,n,t;return{dataLocale:null!==(o=e.dataLocale)&&void 0!==o?o:"",projectLanguages:null!==(n=null===(t=e.project)||void 0===t?void 0:t.languages)&&void 0!==n?n:[]}})),L=Z.dataLocale,M=Z.projectLanguages,B=(0,g.bk)({demandedPermissions:[j.Manage]}),R=(0,v.E0)(),S=(0,v._F)(),O=(0,_.EE)(),w=(0,f.useCallback)(function(){var e=(0,t.Z)(r().mark((function _callee(e,n){var t,s;return r().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return t=x(e),l.prev=1,l.next=4,O.execute({originalDraft:D,nextDraft:t});case 4:R({kind:"success",domain:y.w7.SIDE,text:o.formatMessage(N.channelUpdated,{channelName:(0,k.Wb)(e,{key:"name",locale:L,fallbackOrder:M})})}),l.next=12;break;case 7:l.prev=7,l.t0=l.catch(1),(s=G(l.t0)).unmappedErrors.length>0&&S({errors:s.unmappedErrors}),n.setErrors(s.formErrors);case 12:case"end":return l.stop()}}),_callee,null,[[1,7]])})));return function(o,n){return e.apply(this,arguments)}}(),[D,O,L,o,M,S,R]);return(0,U.tZ)(A,{initialValues:E(D,M),onSubmit:w,isReadOnly:!B,dataLocale:L,children:function children(n){var t,s=(0,k.Wb)({name:null===(t=l()(n))||void 0===t?void 0:t.name},{key:"name",locale:L,fallbackOrder:M,fallback:y.xL});return(0,U.BX)(c.ck,{title:s,isOpen:!0,onClose:e.onClose,isPrimaryButtonDisabled:n.isSubmitting||!n.isDirty||!B,isSecondaryButtonDisabled:!n.isDirty,onSecondaryButtonClick:n.handleReset,onPrimaryButtonClick:function onPrimaryButtonClick(){return n.submitForm()},labelPrimaryButton:c.ck.Intl.save,labelSecondaryButton:c.ck.Intl.revert,children:[a&&(0,U.tZ)(h.Z.Stack,{alignItems:"center",children:(0,U.tZ)(p.Z,{})}),C&&(0,U.tZ)(m.I,{type:"error",children:(0,U.tZ)(u.Z.Body,{children:o.formatMessage(N.channelDetailsErrorMessage)})}),D&&n.formElements,D&&(0,U.tZ)(H.H4,{additionalParts:[s]}),null===D&&(0,U.tZ)(c.uW,{})]})}})};Q.displayName="ChannelDetails";const $=Q}}]);
//# sourceMappingURL=5737.5737.d1325b94aa58ffa878ed.js.map